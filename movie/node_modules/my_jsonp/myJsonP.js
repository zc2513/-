(function(angular){
	//创建服务模块：
	var app=angular.module("serviceJSP",["ngRoute"])
	app.service("myservice",["$window",function($window){
		this.jsonp=function(url,data,fn){//跨域访问 数据库----
			var script=$window.document.createElement("script");
			var str="";
			for (var k in data){
				str+=k+"="+data[k]+"&"
			}
			//创建随机的方法接收返回值，防止连续多次调用，值覆盖问题--
			var call="response"+$window.Math.random().toString().substr(2);
			url+="?"+str+"callback="+call+"";

			$window[call]=function(result){
				fn(result);
			}
			script.src=url;
			$window.document.body.appendChild(script);
		}
	}])
})(angular)